{% extends "core/base.html" %}

{% block extra_css %}
<style>
header.main_menu {
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 999;
  background-color: rgba(0,0,0,0.6);
}

.banner_part {
  position: relative;
  height: auto;
  min-height: 550px;
  overflow: hidden;
  margin-top: 80px; 
  padding-bottom: 40px;
}

.banner_overlay {
  position: absolute;
  top: 0; left: 0;
  height: 100%; width: 100%;
  background-color: rgba(0,0,0,0.5);
  z-index: 1;
}

.marquee-img {
  height: 100%;
  width: auto;
  object-fit: cover;
  border-right: 3px solid rgba(73, 66, 66, 0.5); /* subtle white border */
}

.marquee-bg {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  display: flex;
  align-items: center;
  white-space: nowrap;
  animation: marquee-slide 15s linear infinite;
}

@keyframes marquee-slide {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.marquee-img {
  height: 100%; width: auto;
  object-fit: cover;
}

.banner_text {
  position: relative;
  z-index: 2;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.banner_text_iner h1, 
.banner_text_iner p {
  color: #fff;
}

.btn_2 {
  background: #00cc33;
  border: none;
  color: #fff;
  padding: .75rem 1.5rem;
  border-radius: 30px;
  text-transform: uppercase;
  margin-top: 20px;
}

@media (max-width:768px) {
  .banner_part { 
    height: auto; 
    min-height: 400px; 
    padding: 100px 20px;
  }
  .marquee-img {
    height: 100%;
    min-height: 400px;
  }
  .banner_text_iner h1 { 
    font-size: 28px; 
  }
  .banner_text_iner p {
    font-size: 16px;
  }
  .btn_2 {
    padding: .6rem 1.2rem;
    font-size: 14px;
  }
}

@media(min-width:992px) {
  .banner_part { 
    min-height: 600px; 
    padding-bottom: 60px;
  }
}

</style>
{% endblock %}




{% block banner %}
<section class="banner_part">
  
  <!-- Marquee Images -->
  <div class="marquee-bg">
    {% for img in marquee_images %}
      <img src="{{ img.image.url }}" class="marquee-img">
    {% endfor %}
    {% for img in marquee_images %}
      <img src="{{ img.image.url }}" class="marquee-img">
    {% endfor %}
  </div>

  <!-- Dark Overlay -->
  <div class="banner_overlay"></div>

  <!-- Text overlay from original Colorlib -->
  <div class="container">
    <div class="row align-items-center">
      <div class="col-lg-6 offset-lg-5">
        <div class="banner_text">
          <div class="banner_text_iner">
            <h1>Bless Others With Your Gift</h1>
            <p>Empowering communities through education, health initiatives, and cultural preservation.</p>
            <a href="#" class="btn_2">Start Donation</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
</section>
{% endblock %}

{% block content %}

<section class="blog_area section_padding">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 mb-5 mb-lg-0">
        <div class="blog_left_sidebar">

          {% if events %}
            {% for event in events %}
              <article class="blog_item">
                <div class="blog_item_img">
                  <img class="card-img rounded-0" src="{{ event.photo.url }}" alt="{{ event.title }}">
                  <a href="{{ event.get_absolute_url }}" class="blog_item_date">
                    <h3>{{ event.event_date|date:"d" }}</h3>
                    <p>{{ event.event_date|date:"M" }}</p>
                  </a>
                </div>

                <div class="blog_details">
                  <a class="d-inline-block" href="{{ event.get_absolute_url }}">
                    <h2>{{ event.title }}</h2>
                  </a>
                  <p>{{ event.content|truncatewords:30 }}</p>
                  <ul class="blog-info-link">
                    <li>
                      <a href="#">
                        <i class="far fa-user"></i>
                        {% for cat in event.categories.all %}
                          {{ cat.name }}{% if not forloop.last %}, {% endif %}
                        {% endfor %}
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <i class="far fa-comments"></i>
                        <!-- You can put comment count here if implemented -->
                        0 Comments
                      </a>
                    </li>
                  </ul>
                </div>
              </article>
            {% endfor %}
          {% else %}
            <h2 class="text-center" style="color:green">Stay tuned for upcoming events!</h2>
          {% endif %}

          <!-- Pagination placeholder if needed -->
          <!--
          <nav class="blog-pagination justify-content-center d-flex">
            <ul class="pagination">
              <li class="page-item">
                <a href="#" class="page-link" aria-label="Previous">
                  <i class="ti-angle-left"></i>
                </a>
              </li>
              <li class="page-item active">
                <a href="#" class="page-link">1</a>
              </li>
              <li class="page-item">
                <a href="#" class="page-link" aria-label="Next">
                  <i class="ti-angle-right"></i>
                </a>
              </li>
            </ul>
          </nav>
          -->
        </div>
      </div>

      <!-- Sidebar: you can integrate Most Trending, Categories, Newsletter here as needed -->
      <div class="col-lg-4">
        <div class="blog_right_sidebar">

          <!-- Example: Most Trending widget -->
          <aside class="single_sidebar_widget popular_post_widget">
            <h3 class="widget_title">Most Trending</h3>
            {% if most_trending %}
              {% for trending in most_trending %}
                <div class="media post_item">
                  {% if trending.photo %}
                    <img src="{{ trending.photo.url }}" alt="{{ trending.title }}" class="mr-3" style="width: 60px; height: 60px;">
                  {% endif %}
                  <div class="media-body">
                    <a href="{{ trending.url }}" target="_blank" rel="noopener noreferrer">
                      <h3>{{ trending.title }}</h3>
                    </a>
                    <p>{{ trending.created_at|date:"M d, Y" }}</p>
                  </div>
                </div>
              {% endfor %}
            {% else %}
              <p>No trending items at the moment.</p>
            {% endif %}
          </aside>

          <!-- Other widgets you can include similarly: Categories, Newsletter -->

        </div>
      </div>
    </div>
  </div>
</section>


{% endblock %}
